# emlite-bind-emscripten-example

This is an example repo showing the usage of emlite-bind in a node project targeting the browser via the emscripten toolchain.

If you don't have the wasm32-unknown-emscripten target, you can run `rustup target add wasm32-unknown-emscripten`.

To build:
```bash
# after cloning and cd'ing into the repo
npm i
npm run cargo # runs cargo build --target=wasm32-unknown-emscripten
npm run pack # copies the js generated by emscripten to dist
npm run serve # runs http-server on the dist directory
```

Note that in our .cargo/config.toml, we use the following link flags:
```
sERROR_ON_UNDEFINED_SYMBOLS=0 -sALLOW_MEMORY_GROWTH=1 -sEXPORTED_RUNTIME_METHODS=wasmTable -Wl,--strip-all -sSINGLE_FILE
```

The SINGLE_FILE directive just bundles the wasm inside the emscripten-generated js file. Otherwise, you would need to copy both files to dist.